System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var t,e,n,o,c,s,r,i,a,l,u,d,m,p,j,f,h,g,v,b,y,L,C,T,w,E,k,S,A,x,M,q,I,H,$,D,_,B;return{setters:[function(m){t=m.d,e=m.b,n=m.f,o=m.I,c=m.g,s=m.o,r=m.a,i=m.c,a=m.q,l=m.D,u=m.n,d=m.R},function(t){m=t.aX,p=t.f,j=t.B,f=t.a9,h=t.o,g=t.H,v=t.a,b=t.i,y=t.K,L=t.ak,C=t.q,T=t.j,w=t.W,E=t.y,k=t.L,S=t.F,A=t.g,x=t.a0,M=t.Y,q=t.I,I=t.s,H=t.aj,$=t.w,D=t.aY,_=t.b,B=t.X}],execute:function(){function P(t){const e=new WeakMap;for(const n of t)e.set(n,n.getBoundingClientRect());return e}async function R(t,e,n){const o=e.get(t),c=n.get(t),s=o.left-c.left,r=o.top-c.top;0===s&&0===r||(await m(),t.style.transform=`translateZ(0) translate(${s}px, ${r}px)`,t.style.transition="transform 0s",await m(),t.style.transform="",t.style.transition="transform 500ms",await new Promise(e=>t.addEventListener("transitionend",e,{once:!0})),t.style.transition="")}function F(t,e){const n=P(t),o=[];for(const c of t)o.push(R(c,e,n));return Promise.all(o)}let K;function N(t){if(!t)return;K&&clearTimeout(K);const n=e(document,".js-project-updated-message");n.textContent=t,n.classList.remove("d-none"),K=window.setTimeout((function(){n.textContent="",n.classList.add("d-none")}),3e3)}function U(t,e){const n=`column-${t.id}`,c=document.getElementById(n);if(c)return c;{const c=new o;return c.id=n,c.src=`${e}/${t.id}`,c}}function W(t,e){const n=`card-${t}`,c=document.getElementById(n);if(c)return c;{const c=new o;return c.id=n,c.src=`${e}/${t}`,c.onerror=function(){c.remove()},c}}function O(t,n){const o=n.querySelector(".js-project-column-automation-footer");if(!o)return;const c=e(o,".js-project-column-automation-summary");t.automation_summary&&t.purpose?(c.textContent=t.purpose,c.setAttribute("aria-label",t.automation_summary),o.classList.remove("d-none")):o.classList.add("d-none")}function V(t,n,o,c){t.setAttribute("data-column-id",n),t.setAttribute("data-column-name",o),t.href=`#column-${n}`,e(t,".js-column-nav-name").textContent=o;const s=e(t,".js-column-nav-card-count");s.textContent=c,s.setAttribute("aria-label",`Contains ${c} ${1===Number(c)?"item":"items"}`)}function X(t,n,o,c,s,r){const i=t.content.cloneNode(!0),a=e(i,".js-project-column-navigation-item",HTMLAnchorElement);a.classList.toggle("selected",r),V(a,o,c,s);const l=n.querySelectorAll(".js-project-column-navigation-item").length+1;e(i,".js-column-nav-index").textContent=l.toString(),n.appendChild(i)}function G(t,e,n){const o=document.createDocumentFragment();for(const c of e)o.appendChild(n[c]);t.innerHTML="",t.appendChild(o)}const J=t((async function(t,o){N(o.message);const c=t.querySelectorAll(".js-project-column"),s=P(c),r=t.getAttribute("data-url")||"",i=t.getAttribute("data-columns-url")||"",a=t.getAttribute("data-cards-url")||"",l=o.state||await p(r);n(t,"will-update-project",l);const u=document.activeElement;if(function(t,e){const n=Array.from(t.querySelectorAll(".js-project-column")).map(t=>t.getAttribute("data-id"));return e.columns.map(t=>String(t.id)).join(",")!==n.join(",")}(t,l)){n(t,"will-update-project-columns");const o={},r=document.createDocumentFragment();for(const t of l.columns){const e=U(t,i),n=e.querySelector(".js-project-column-cards");n&&(o[n.id]=n.scrollTop),r.appendChild(e)}const a=t.querySelector(".js-new-project-column-container");a&&a.remove();const u=e(t,".js-new-column-blankslate");if(u.remove(),t.innerHTML="",t.appendChild(r),a){t.appendChild(a),e(a,".js-new-column-button").classList.toggle("d-none",0===l.columns.length)}t.appendChild(u),u.classList.toggle("d-none",l.columns.length>0),function(t){const n=document.querySelector(".js-project-column-nav");if(!n)return;const o=e(n,".js-column-nav-template",HTMLTemplateElement),c=n.scrollLeft;let s;for(const e of document.querySelectorAll(".js-project-column-navigation-item"))e.remove(),e.classList.contains("selected")&&(s=e.getAttribute("data-column-id"));for(const e of t)X(o,n,e.id.toString(),e.name,e.card_ids.length.toString(),s===e.id.toString());n.scrollLeft=c}(l.columns);for(const t in o){document.getElementById(t).scrollTop=o[t]}await F(c,s)}const d=t.querySelectorAll(".js-project-column-card"),m=P(d),j={};for(const e of l.columns)for(const t of e.card_ids)j[t]=W(t.toString(),a);for(const n of l.columns){const t=document.getElementById(`column-${n.id}`);if(!t||"INCLUDE-FRAGMENT"===t.tagName)return;const o=t.querySelector(".js-project-column-name");if(o){o.textContent=n.name;const e=t.querySelector(".js-project-column-name-field");e instanceof HTMLInputElement&&(e.value=n.name,e.setAttribute("value",n.name))}const c=t.querySelector(".js-column-card-count");c&&(c.textContent=n.card_ids.length.toString()),O(n,t),G(e(t,".js-project-column-cards"),n.card_ids,j)}n(t,"update-project"),await F(d,m),u&&document.activeElement!==u&&u.focus()}),100);const Y=["assignee","author","is","label","milestone","repo","review","state","status","type","linked"],z={pr:"issue"},Z=["issue","pr","note"],Q=["assignee","label","milestone"],tt=/[^\s:]+:("(?:\\"|.)*?"|[^\s]*)|[^\s]+/g;function et(t,e){let n=t[e];return n||(n={tokenFilters:[],matchIfMissing:!1},t[e]=n),n}function nt(t,e,n){const o=t.tokenFilters.find(t=>t.token===e);o?o.negated=n:t.tokenFilters.push({token:e,negated:n}),t.matchIfMissing=!1}function ot(t,e){const n=`^-?${e}:\\s*"?(.*?)"?\\s*$`;return t.replace(new RegExp(n),"$1").replace(/\\(")/g,"$1")}function ct(t){const e=t.match(tt)||[],n={};for(const o of e){const t=Y.find(t=>o.match(new RegExp(`^-?${t}:.*`)));if(t){const c=ot(o,t);if(c.length>0){if(nt(et(n,t),c,o.startsWith("-")),"linked"!==t)continue;const s=z[c],r=t=>t.some(t=>{const e=ot(t,"is");return t!==e&&Z.includes(e)});if(s&&!r(e)){nt(et(n,"is"),s,!1)}}}else{const t=Q.find(t=>o===`no:${t}`);if(t)et(n,t).matchIfMissing=!0;else if(o.length>0){nt(et(n,"title"),o,!1)}}}return n}let st,rt;function it(){return e(document,".js-card-filter-input",HTMLInputElement).value.trim().toLowerCase()}function at(t,e){for(const o in e){const c=t.getAttribute(`data-card-${o}`)||"";let s=[];""!==c.trim()&&(s=JSON.parse(c));const r=e[o];if(r.matchIfMissing){if(s.length>0)return!1}else for(const t of r.tokenFilters)if("title"===o){if(!lt(t.token,s))return!1}else{if("linked"===o&&!z[t.token])return!1;const e=(n=t.token,-1!==s.indexOf(n));if(t.negated){if(e&&s.length>0)return!1}else if(!e)return!1}}var n;return!0}function lt(t,e){return e.some(e=>e.startsWith(t))}function ut(){const t=it();for(const n of document.querySelectorAll(".js-project-columns-container .js-project-column")){const o=e(n,".js-filtered-column-card-count");if(t.length>0){const t=n.querySelectorAll(".js-project-column-card:not(.d-none)").length;o.textContent=`${t.toString()} result${1!==t?"s":""}`}o.classList.toggle("d-none",0===t.length)}}function dt(t){const e=function(){const t=it();return rt!==t&&(rt=t,st=ct(t)),st}();let n=at(t,e);if(!n)for(const o of t.querySelectorAll(".js-issue-note, .js-issue-note-reference"))if(n=at(o,e),n)break;t.classList.toggle("d-none",!n)}function mt(){const t=e(document,".js-card-filter-input",HTMLInputElement),n=it();e(document,".js-card-filter-clear").classList.toggle("d-none",0===n.length),function(t,e){const n=new URL(window.location.href,window.location.origin),o=new URLSearchParams(n.search.slice(1));""===e?o.delete(t):o.set(t,e),n.search=o.toString(),j(f(),document.title,n.toString())}(t.name,n),function(t,e){for(const n of document.querySelectorAll(".js-project-fullscreen-link")){const o=new URL(n.getAttribute("href")||"",window.location.origin),c=new URLSearchParams(o.search.slice(1));""===e?c.delete(t):c.set(t,e),o.search=c.toString(),n.setAttribute("href",o.toString())}}(t.name,n)}function pt(){for(const t of document.querySelectorAll(".js-project-columns-container .js-project-column-card"))dt(t);ut(),mt()}const jt=/:"[^"]*"?$/,ft=/(^|\s+)[^\s:]+$/,ht=/^(\s|$)/;function gt(t){!function(t){if(document.activeElement!==t)return!1;const e=t.value.slice(0,t.selectionEnd),n=t.value.slice(t.selectionEnd),o=0===t.value.trim().length;if(jt.test(e))return!1;const c=ft.test(e)&&ht.test(n);return o||c}(t)?yt():function(t){const n=document.querySelector(".js-card-filter-suggester");if(n instanceof HTMLElement){n.classList.add("js-active-navigation-container"),n.classList.remove("d-none");const o=(t.value.slice(0,t.selectionEnd).match(bt)||[])[0],c=e(n,".js-card-filter-suggester-helper-container"),s=e(c,".js-card-filter-suggester-helper");vt.test(t.value)?(s.textContent=t.value,c.classList.remove("d-none")):c.classList.add("d-none");const r=e(n,".js-card-filter-suggestions-header");let i=!1;for(const t of n.querySelectorAll(".js-card-filter-suggestion")){const e=t.getAttribute("data-value");e&&e.startsWith(o)?(t.classList.remove("d-none"),i=!0):t.classList.add("d-none")}r.classList.toggle("d-none",!i)}}(t)}const vt=/(^|\s)[^\s:]+$/,bt=/\S*$/;function yt(){const t=document.querySelector(".js-card-filter-suggester");t instanceof HTMLElement&&(t.classList.remove("js-active-navigation-container"),t.classList.add("d-none"))}function Lt(t){const n=e(document,".js-card-filter-input",HTMLInputElement),o=n.value;let c=t,s=!0;o.indexOf(c)>=0?(s=!1,c=o.replace(c,"")):o.length&&(c=`${o.trim()} ${c}`),n.value=c,function(t,e){for(const n of document.querySelectorAll(".js-card-filter[data-card-filter]"))n.getAttribute("data-card-filter")===e&&n.setAttribute("aria-pressed",t.toString())}(s,t),pt()}const Ct=!navigator.userAgent.match(/Macintosh/);function Tt(t){switch(t){case" ":return"Space";case"ArrowUp":case"k":case"K":return"up";case"ArrowDown":case"j":case"J":return"down";case"ArrowLeft":case"h":case"H":return"left";case"ArrowRight":case"l":case"L":return"right";case"Enter":return"confirm";case"Escape":return"cancel";default:return t}}class ItemMove{constructor(t,e){this.item=t,this.onDone=e,this.moved=!1,this.moveInProgress=!1,this.blurring=!1,this.blurListener=this.handleBlur.bind(this),this.item.addEventListener("blur",this.blurListener),this.item.classList.add("moving")}handleBlur(t){!this.moveInProgress&&t.relatedTarget&&(this.blurring=!0,this.cancel())}isMetaKeyPressed(t){return Ct?t.ctrlKey:t.metaKey}inPendingColumn(){return null!=this.item.closest(".js-project-pending-cards")}findColumn(t){return t?document.querySelector(`.js-project-column[data-id="${t}"]`):null}findCard(t){if(!t)return null;let e=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`);return e||(e=document.querySelector(`.js-project-column-card[data-content-id="${t}"]`)),e}isColumn(t){return null!=t&&t.classList.contains("js-project-column")}getColumn(){return this.item.closest(".js-project-column")}getPane(){return this.item.closest(".js-project-pane")}getColumnName(){const t=this.getColumn(),e=t&&t.querySelector(".js-project-column-name");return e?e.textContent:""}getColumnsContainer(){return e(document,".js-project-columns-container")}getNextColumn(){const t=this.getColumn();if(t){const e=t.nextElementSibling;if(this.isColumn(e))return e}return null}getPreviousColumn(){const t=this.getColumn();if(t){const e=t.previousElementSibling;if(this.isColumn(e))return e}return null}getFirstColumn(){return this.getColumnsContainer().querySelector(".js-project-column")}getLastColumn(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return t[t.length-1]}getCardID(t){return t&&(t.getAttribute("data-card-id")||t.getAttribute("data-content-id"))||""}getColumnID(t){return t&&t.getAttribute("data-id")||""}isMoving(t){return t===this.item}updateAriaLabel(){}moveTransaction(t){try{this.moveInProgress=!0,t(this.item),this.blurring||(this.updateAriaLabel(),this.item.focus())}finally{this.moved=!0,this.moveInProgress=!1}}done(){this.item.removeEventListener("blur",this.blurListener),this.item.classList.remove("moving"),this.item.removeAttribute("aria-label"),this.onDone()}cancel(){}}class CardMove extends ItemMove{constructor(t,e,n){super(t,n),this.moveCard=e,this.pendingCard=this.inPendingColumn(),this.getPane()&&(this.paneColumnCards=t.closest(".js-project-column-cards")),this.columnID=this.getColumnID(this.getColumn()),this.previousCardID=this.getCardID(t.previousElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateStartListener=this.handleUpdateStart.bind(this),this.getColumnsContainer().addEventListener("will-update-project",this.updateStartListener),this.updateEndListener=this.handleUpdateEnd.bind(this),this.getColumnsContainer().addEventListener("update-project",this.updateEndListener)}updateAriaLabel(){const t=this.getCardIndex(),e=t>=0?`to position ${t+1} of ${this.getCardCount()}`:"",n=`in ${this.getColumnName()} column`;this.item.setAttribute("aria-label",`Moved card ${e} ${n}`.trim())}handleUpdateStart(t){if(!(t instanceof CustomEvent))throw new Error("invariant");const e=this.getColumn();if(!e)return void this.done();if(!this.paneColumnCards&&!this.updatePreviousPosition(t.detail))return void this.done();const n=this.getColumnID(e);this.isColumnInState(t.detail,n)?this.updateSnapshot={columnID:n,indexInColumn:this.getCardIndex()}:this.done()}handleUpdateEnd(){const t=this.updateSnapshot;if(this.updateSnapshot=null,!t||!this.getColumn())return void this.done();const e=this.findCard(this.getCardID(this.item)),n=this.getColumnCards(this.findColumn(t.columnID));if(e&&n){this.moveToColumn(n);const o=n.children[t.indexInColumn];e!==o&&this.moveToBeforeCard(n,o)}}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(Tt(t.key)){case"up":e?this.moveToTop():this.moveUp(),t.preventDefault();break;case"down":e?this.moveToBottom():this.moveDown(),t.preventDefault();break;case"left":e?this.moveToFirstColumn(t.shiftKey):this.moveLeft(t.shiftKey),t.preventDefault();break;case"right":e?this.moveToLastColumn(t.shiftKey):this.moveRight(t.shiftKey),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}updatePreviousPosition(t){if(!t||!t.columns)return!1;const e=this.getCardID(this.item);for(const n of t.columns)for(let t=0;t<n.card_ids.length;t++)if(e===n.card_ids[t].toString())return this.previousCardID=n.card_ids[t-1].toString(),this.columnID=n.id.toString(),!0;return!1}isColumnInState(t,e){if(!t||!t.columns)return!1;for(const n of t.columns)if(e===n.id.toString())return!0;return!1}getCardIndex(){const t=this.getColumnCards(this.getColumn());return t?Array.from(t.children).indexOf(this.item):-1}getCardCount(){const t=this.getColumnCards(this.getColumn());return t?t.querySelectorAll(".js-project-column-card").length:0}getColumnCards(t){return null!=t?t.querySelector(".js-project-column-cards"):null}moveToBeforeCard(t,e){this.moveTransaction((function(n){t.insertBefore(n,e)}))}moveToColumn(t){this.moveTransaction((function(e){t.appendChild(e)}))}moveUp(){const t=this.item.previousElementSibling,e=this.getColumnCards(this.getColumn());t&&e&&this.moveToBeforeCard(e,t)}moveToTop(){const t=this.getColumnCards(this.getColumn());t&&this.moveTransaction((function(e){t.prepend(e)}))}moveDown(){const t=this.item.nextElementSibling,e=this.getColumnCards(this.getColumn());if(t&&e){const n=t.nextElementSibling;n?this.moveToBeforeCard(e,n):this.moveToBottom()}else this.moveToBottom()}moveToBottom(){const t=this.getColumnCards(this.getColumn());t&&this.moveToColumn(t)}moveToFirstColumn(t){const e=this.getColumnCards(this.getFirstColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveToLastColumn(t){const e=this.getColumnCards(this.getLastColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveLeft(t){const e=this.getColumnCards(this.getPane()?this.getLastColumn():this.getPreviousColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveRight(t){const e=this.getColumnCards(this.getNextColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project",this.updateStartListener),this.getColumnsContainer().removeEventListener("update-project",this.updateEndListener)}confirm(){if(this.moved){let t=this.findColumn(this.columnID);this.pendingCard&&!t&&(t=document.querySelector(".js-project-pending-cards-container.js-project-column")),this.moveCard(this.item,t,{keyboardMove:!0})}this.done()}cancel(){let t,e;if(this.moved)if(this.previousCardID){const n=this.findCard(this.previousCardID);n&&(t=n.closest(".js-project-column-cards"),e=n.nextElementSibling)}else this.columnID?(t=this.getColumnCards(this.findColumn(this.columnID)),t&&(e=t.firstElementChild)):this.paneColumnCards&&(t=this.paneColumnCards,e=t.firstElementChild);t&&(e?this.moveToBeforeCard(t,e):this.moveToColumn(t)),this.done()}}class ColumnMove extends ItemMove{constructor(t,e,n){super(t,n),this.moveColumn=e,this.nextColumnID=this.getColumnID(t.nextElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateListener=this.done.bind(this),this.getColumnsContainer().addEventListener("will-update-project-columns",this.updateListener)}updateAriaLabel(){const t=this.getColumnIndex(),e=t>=0?`to position ${t+1} of ${this.getColumnCount()}`:"";this.item.setAttribute("aria-label",`Moved ${this.getColumnName()} column ${e}`.trim())}getColumnIndex(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return Array.from(t).indexOf(this.item)}getColumnCount(){return this.getColumnsContainer().querySelectorAll(".js-project-column").length}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(Tt(t.key)){case"left":e?this.moveToFirstColumn():this.moveLeft(),t.preventDefault();break;case"right":e?this.moveToLastColumn():this.moveRight(),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}insertBefore(t){const e=this.getColumnsContainer();this.moveTransaction((function(n){e.insertBefore(n,t)}))}moveLeft(){const t=this.getPreviousColumn();t&&this.insertBefore(t)}moveRight(){const t=this.getNextColumn();if(t){const e=t.nextElementSibling;e&&this.isColumn(e)?this.insertBefore(e):this.moveToLastColumn()}else this.moveToLastColumn()}moveToFirstColumn(){const t=this.getFirstColumn();t&&this.insertBefore(t)}moveToLastColumn(){const t=this.getLastColumn();if(t){const e=t.nextElementSibling;e&&this.insertBefore(e)}}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project-columns",this.updateListener)}confirm(){this.moved&&this.moveColumn(this.item,{keyboardMove:!0}),this.done()}cancel(){if(this.moved){const t=this.findColumn(this.nextColumnID);t?this.insertBefore(t):this.moveToLastColumn()}this.done()}}let wt;const Et=document.querySelector(".js-client-uid");function kt(t,e){T(t,(async function(t,n,o){try{await e(t,n,o)}catch(c){throw c.response&&await At("project-update-error"),c}}))}function St(t){i(t,"details-dialog",l).toggle(!1)}async function At(t,n){const o=e(document,`#${t}`,HTMLTemplateElement),c=await w({content:o.content.cloneNode(!0),dialogClass:"project-dialog"});return n&&n.setAttribute("aria-expanded","true"),c.addEventListener("dialog:remove",(function(){n&&n.setAttribute("aria-expanded","false")}),{once:!0}),c}function xt(t,n){const o=e(t,".js-column-card-count"),c=parseInt(o.textContent.trim()),s=t.getAttribute("data-id");let r,i=c+n;0===n&&(i=0),o.textContent=i.toString(),s&&(r=e(document,`.js-project-column-navigation-item[data-column-id="${s}"] .js-column-nav-card-count`),r.textContent=i.toString());const a=`Contains ${i} ${1===i?"item":"items"}`;o.setAttribute("aria-label",a),r&&r.setAttribute("aria-label",a)}function Mt(t,e){const n=u(t,"keyboard_move");e&&!0===e.keyboardMove?n.value="true":n.value=""}function qt(t,n,o){n&&(!function(t){t.classList.contains("js-project-pending-cards-container")&&0===t.querySelectorAll(".js-project-column-card").length&&t.remove()}(n),xt(n,-1));const s=t.closest(".js-project-column");if(!s)return;const r=c(s,"data-id");t.setAttribute("data-column-id",r),xt(s,1),function(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelector(".js-search-cards-next-page");if(e instanceof HTMLInputElement){null==t.querySelector(".js-project-column-card")&&(e.value="1")}}}();const i=e(s,".js-project-content-form",HTMLFormElement);i.reset(),function(t,e){const n=u(t,"card_id"),o=u(t,"content_id"),s=u(t,"content_type");if(!e)return n.value="",o.value="",void(s.value="");const r=e.getAttribute("data-card-id");r?(n.value=r,o.value="",s.value=""):(n.value="",o.value=c(e,"data-content-id"),s.value=c(e,"data-content-type")),u(t,"client_uid").value=wt}(i,t);const a=t.previousElementSibling,l=u(i,"previous_card_id");l.value=a?c(a,"data-card-id"):"",Mt(i,o),E(i)}function It(t){const e=t.item;if(e.closest(".js-project-triage-pane"))return;const n=t.from;qt(e,n&&n.closest(".js-project-column")),e.focus()}function Ht(t){const e=t.closest(".js-project-column");e&&xt(e,-1),t.remove()}Et&&(wt=c(Et,"data-uid"));const $t=/^#card-(\d+)$/;function Dt(t,n){const o=e(document,".js-reorder-columns-form",HTMLFormElement);u(o,"column_id").value=c(t,"data-id");const s=t.previousElementSibling,r=u(o,"previous_column_id");r.value=s?c(s,"data-id"):"",Mt(o,n),E(o)}function _t(t){if(t.related&&!t.related.matches(".js-project-column"))return!1}function Bt(t){const e=t.item;Dt(e),e.focus()}function Pt(){const t=document.querySelector(".js-project-search-form");t instanceof HTMLFormElement&&E(t)}function Rt(){const t=document.querySelector(".js-project-archived-cards-search-form");t instanceof HTMLFormElement&&E(t)}function Ft(t,e,n){let o;return t&&(o=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`)),!o&&e&&n&&(o=document.querySelector(`.js-project-column-card[data-content-type="${n}"][data-content-id="${e}"]`)),o}var Kt,Nt;function Ut(t){const n=e(document,".js-new-project-column-container"),o=e(document,".js-new-column-blankslate"),c=e(n,".js-new-column-button");o.classList.toggle("d-none",!t),c.classList.toggle("d-none",t),t&&Wt(".js-project-triage-pane",!1)}function Wt(t,e){for(const n of document.querySelectorAll(".js-project-header, .js-project-columns, .js-project-pane, .js-project-small-footer"))n.classList.toggle("hide-sm",e);for(const n of document.querySelectorAll(".js-project-columns"))n.classList.toggle("push-board-over",e);for(const n of document.querySelectorAll(t))n.classList.toggle("d-none",!e),n.classList.toggle("hide-sm",!e)}function Ot(t){const e=document.querySelector(".js-project-archived-cards-results");if(e){const n=c(e,"data-project-archived-cards-url"),o=new URL(n,window.location.origin),s=new URLSearchParams(o.search.slice(1));t&&s.append("card_id",t),o.search=s.toString(),e.setAttribute("src",o.toString())}}function Vt(t,n){e(document,".js-show-triage-field",HTMLInputElement).value=n?"show":"",Pt()}function Xt(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelectorAll(".js-project-column-card"),n={};for(const t of e){const e=t.getAttribute("id");e&&(n.hasOwnProperty(e)&&t.remove(),n[e]=!0)}}}function Gt(t){const e=t.closest(".js-details-container");e&&e.classList.remove("open","Details--on")}function Jt(t){if(!(t instanceof KeyboardEvent))throw new Error("invariant");"Escape"===x(t)&&Gt(t.currentTarget)}function Yt(t){const n=t.closest(".js-project-column");if(!n)return;const o=t.value;if(t.setAttribute("data-preview-text",o),/(gh-|issues\/|pull\/|projects\/|discussions\/|#)\d+/.test(o)){const t=e(n,".js-preview-note-form",HTMLFormElement);u(t,"note").value=o,E(t)}else e(n,".js-note-preview").innerHTML=""}function zt(t){D(t);const n=e(t,".js-task-list-field",HTMLTextAreaElement);n.defaultValue=n.value;for(const e of a(t,".task-list-item-checkbox",HTMLInputElement))e.defaultChecked=e.checked}s("change",".js-toggle-linked-repo-scope",(function(t){const n=t.currentTarget,o=n.form,c=e(o,".js-project-triage-search-text",HTMLInputElement),s=c.value||"";let r;r=n.checked?s.replace(/(\s|^)repo:[^\s]*\s*/gi,"$1").trim():`${s.trim()} repo:*`,r!==s&&(c.value=r,E(o))})),s("click",".js-project-show-all-archived-cards",Rt),kt(".js-project-update-card",(async function(t,n){const o=await n.html(),c=e(o.html,"*"),s=Ft(c.getAttribute("data-card-id"),c.getAttribute("data-content-id"),c.getAttribute("data-content-type")),r=!(!s||s!==s.ownerDocument.activeElement);s&&s.replaceWith(c),r&&c.focus()})),Kt="project-clone-error",Nt=async function(t,n){const o=await n.json(),c=o.json.project_url,s=o.json.job_status_url;try{await k(s),window.location=c}catch(r){if(c){const t=await At("project-clone-partial-error");e(t,".js-cloned-board-link").setAttribute("href",c)}else await At("project-clone-error")}},T(".js-project-clone-form",(async function(t,n,o){const c=e(t,".form-actions"),s=e(t,".js-project-loader");c.classList.add("d-none"),s.classList.remove("d-none");try{await Nt(t,n,o)}catch(r){throw r.response&&await At(Kt),c.classList.remove("d-none"),s.classList.add("d-none"),r}})),kt(".js-convert-note-to-issue-form",(async function(t,n){try{await n.text(),St(t)}catch(o){if(!function(t){try{return t&&t.json&&"note_already_converted_to_issue"===t.json.error_code}catch(o){return!1}}(o.response))throw o;{const n=e(t,".js-convert-note-error-container");n.innerHTML="",n.append(S(document,o.response.json.error_html))}}})),kt(".js-change-project-state-form",(async function(t,e){const n=document.activeElement;n instanceof HTMLElement&&t.contains(n)&&n.blur(),await e.text(),St(t)})),s("click",".js-add-project-description",(async function(){const t=await At("edit-project");e(t,"#edit-project-name").removeAttribute("autofocus"),e(t,"#edit-project-body").setAttribute("autofocus","")})),s("click",".js-project-target-owner",(function(t){const n="repository"===c(t.currentTarget,"data-owner-type"),o=i(t.currentTarget,".js-project-clone-dialog");if(e(o,".js-project-clone-visibility").classList.toggle("d-none",n),n){e(o,".js-project-clone-private",HTMLInputElement).checked=!0}})),s("click",".js-refresh-project",(function(){window.location.reload()})),kt(".js-create-project-column",(async function(t,n){const o=await n.html(),c=e(o.html,"*");if(c.classList.contains("js-column-form-container")){i(t,".js-column-form-container").replaceWith(c),Qt()}else{e(document,".js-new-project-column-container").before(o.html),St(t),function(t){const n=document.querySelector(".js-project-column-nav");n&&X(e(n,".js-column-nav-template",HTMLTemplateElement),n,t.getAttribute("data-id")||"",e(t,".js-project-column-name").textContent,e(t,".js-column-card-count").textContent,!0)}(c);const n=c.getAttribute("data-id");n&&(ce(n),oe(n),se()),e(document,".js-new-column-blankslate").classList.contains("d-none")||Ut(!1)}})),kt(".js-update-project-column",(async function(t,n){const o=await n.html(),s=e(o.html,"*");if(s.classList.contains("js-column-form-container")){i(t,".js-column-form-container").replaceWith(s),Qt()}else{const n=c(t,"data-column-id");e(document,`.js-project-column[data-id="${n}"]`).replaceWith(s),function(t){const n=t.getAttribute("data-id");if(!n)return;const o=document.querySelector(`.js-project-column-navigation-item[data-column-id="${n}"]`);if(o instanceof HTMLAnchorElement){V(o,n,e(t,".js-project-column-name").textContent,e(t,".js-column-card-count").textContent)}}(s),St(t)}})),kt(".js-delete-project-column",(async function(t,n){await n.text();const o=c(t,"data-column-id"),s=a(document,".js-project-column",HTMLElement);e(document,`.js-project-column[data-id="${o}"]`).remove(),St(t),function(t){for(const e of document.querySelectorAll(".js-project-column-navigation-item"))if(t===e.getAttribute("data-column-id"))return void e.remove()}(o),1===s.length&&Ut(!0)})),kt(".js-archive-project-column",(async function(t,n){await n.text();const o=c(t,"data-column-id");!function(t){e(t,".js-project-column-cards").innerHTML="",xt(t,0)}(e(document,`.js-project-column[data-id="${o}"]`)),St(t)})),r(".js-project-column-card, .js-project-column",{constructor:HTMLElement,initialize(t){t.id===document.location.hash.substr(1)&&setTimeout(()=>{document.querySelector(".js-project-page-mobile")||t.focus()},1)}}),kt(".js-remove-card-after-request",(async function(t,e){await e.text(),Ht(i(t,".js-project-column-card")),Pt()})),kt(".js-archive-project-card",(async function(t,e){Ht(i(t,".js-project-column-card")),await e.text(),Rt()})),kt(".js-unarchive-project-card",(async function(t,e){const n=i(t,".js-project-column-card"),o=c(n,"data-column-id"),s=document.querySelector(`.js-project-column[data-id="${o}"] .js-project-column-cards`);s&&(s.append(n),qt(n),n.focus()),e.text()})),kt(".js-project-archived-cards-search-form",(async function(t,n){const o=i(t,".js-project-archived-cards-pane"),c=e(o,".js-project-column-cards");let s;c.textContent="Loadingâ€¦",t.classList.add("loading");try{s=await n.html()}catch(r){}c.innerHTML="",s&&c.append(s.html),t.classList.remove("loading")})),g((async function({target:t}){if(t instanceof HTMLElement)t.matches(".js-project-column-card")?t.focus():t.matches(".js-project-column")&&(ce(c(t,"data-id")),se());else if(document.location.hash.length>0){const t=function(){const t=document.location.hash.match($t);return t?t[1]:null}();if(null!=t){const n=document.querySelector(".js-project-archived-cards-pane");if(n){const o=c(n,"data-project-archived-card-url");let s;try{s=await A(o.replace("{card_id}",t))}catch(e){}null!=s&&(Ot(t),Wt(".js-project-archived-cards-pane",!0))}}}})),s("click",".js-show-project-triage",(function(){Wt(".js-project-pane",!1),Wt(".js-project-menu-pane",!0),Wt(".js-project-triage-pane",!0);const t=e(document,".js-project-triage-pane");t.addEventListener("animationend",(function(){e(t,".js-project-triage-search-text",HTMLInputElement).focus()}),{once:!0})})),s("click",".js-show-archived-cards",(function(){Ot(),Wt(".js-project-pane",!1),Wt(".js-project-menu-pane",!0),Wt(".js-project-archived-cards-pane",!0)})),s("click",".js-show-project-menu",(function(){!function(){const t=document.querySelector(".js-project-activity-results");if(t){const e=c(t,"data-project-activity-url"),n=new URL(e,window.location.origin);t.setAttribute("src",n.toString())}}(),Wt(".js-project-pane",!1),Wt(".js-project-menu-pane",!0)})),s("click",".js-hide-project-menu",(function(){Wt(".js-project-pane",!1)})),s("click",".js-show-triage",(function(t){Vt(0,!0)})),s("click",".js-hide-triage",(function(t){Vt(0,!1)})),kt(".js-project-search-form",(async function(t,n){if(function(t){const n=t.querySelector(".js-toggle-linked-repo-scope"),o=e(t,".js-project-triage-search-text",HTMLInputElement);return!!(n instanceof HTMLInputElement&&n.checked)&&function(t,e){return null!=ct(t)[e]}(o.value,"repo")}(t)){e(t,".js-toggle-linked-repo-scope",HTMLInputElement).checked=!1}t.classList.add("loading");const o=await n.html(),c=i(t,".js-project-triage-pane"),s=e(c,".js-project-search-results");s.innerHTML="",s.append(o.html),t.classList.remove("loading")})),kt(".js-project-activity-form",(async function(t,e){const n=await e.html(),o=i(t,".js-project-activity-pane"),c=o.querySelector(".js-project-activity-container");c&&(c.innerHTML="",c.append(n.html)),o&&o.classList.remove("Details--on")})),r(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=c(t,"data-content-type"),n=c(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),r(".js-more-search-cards-form",{subscribe:t=>v(t,"page:loaded",Xt)}),s("click",".js-dismiss-note-form-button",(function(t){Gt(t.currentTarget)})),h(".js-note-text",(function(t){const e=t;b(e,Yt),e.addEventListener("blur",(function(){M(e,Yt)}),{once:!0})})),r(".js-project-note-form",{subscribe:t=>v(t,"keyup",Jt)}),kt(".js-preview-note-form",(async function(t,n){const o=i(t,".js-project-column"),c=e(o,".js-note-text",HTMLTextAreaElement),s=e(o,".js-note-preview");let r;try{r=(await n.html()).html}catch(a){}s.innerHTML="",r&&c.getAttribute("data-preview-text")===c.value&&s.appendChild(r)})),s("tab-container-changed",".js-project-picker-tabs",(async function(t){const n=t.currentTarget,o=e(n,"remote-input",d);o.setAttribute("aria-owns",t.detail.relatedTarget.id),o.src=c(t.detail.relatedTarget,"data-filter-url")})),kt(".js-project-note-form",(async function(t,n){const o=e(t,"textarea",HTMLTextAreaElement);o.disabled=!0;const s=e(t,"button",HTMLButtonElement);s.disabled=!0;const r=t.closest(".js-project-column");if(r){e(r,".js-note-text").removeAttribute("data-preview-text")}let a;try{a=await n.html()}catch(l){if(a=l.response,r&&a&&409===a.status&&a.html){const t=e(r,".js-note-preview");t.innerHTML="",t.appendChild(a.html)}return a&&422===a.status&&await At("project-update-error"),s.disabled=!1,o.blur(),o.disabled=!1,void o.focus()}if(r){e(r,".js-note-preview").innerHTML="",function(t,n){e(t,".js-project-column-cards").prepend(n),xt(t,1)}(r,a.html)}else!function(t,e){const n=e.querySelector("*");if(!n||!n.classList.contains("js-note-form-container")){const n=c(t,"data-card-id"),o=document.getElementById(`card-${n}`);o&&o.replaceWith(e),t.reset(),St(t)}else i(t,".js-note-form-container").replaceWith(e)}(t,a.html);o.blur(),o.disabled=!1,q(o,""),o.focus()})),kt(".js-project-column-card .js-comment-update",(async function(t,n,o){const s=i(t,".js-task-list-container"),r=i(t,".js-project-column-card"),a=c(t,"data-note-version");let l;o.headers.set("X-Note-Version",a);try{l=await n.json()}catch(m){if(l=m.response,l&&422===l.status&&l.json.stale)return N(l.json.message),zt(s),void I(r);throw m}t.setAttribute("data-note-version",l.json.note_version);const u=l.json.note;e(s,".js-task-list-field",HTMLTextAreaElement).value=u;const d=e(r,".js-edit-note-template",HTMLTemplateElement);e(d.content,".js-edit-note-input",HTMLTextAreaElement).textContent=u,zt(s)}));const Zt=t((function(){ut(),mt()}),1);async function Qt(t){const n=document.querySelector(".js-project-column-automation");if(!n)return;const s=i(n,".js-column-settings-form"),r=e(n,".js-project-automation-options",o),a=e(s,".js-project-autmoation-loader"),l=e(s,".js-column-purpose-details"),u=t||c(n,"data-src");function d(t){l.hidden=t,a.hidden=!t}r.src=u,r.addEventListener("loadstart",()=>d(!0)),r.addEventListener("loadend",()=>d(!1))}function te(t){return t.matches(".js-drag-by-handle")?"position-fixed":void 0}function ee(t){return t.matches(".js-drag-by-handle")?".js-project-dragger":void 0}function ne(){let t;if(document.location.hash.startsWith("#column-")&&(t=document.getElementById(document.location.hash.substr(1))),t||(t=document.querySelector(".js-project-column")),t){const e=t.getAttribute("data-id");e&&(ce(e),se())}}function oe(t){if(!document.querySelector(".js-project-page-mobile"))return;const e=document.createElement("a");e.href=`#column-${t}`,j(null,"",e.href)}function ce(t){for(const e of document.querySelectorAll(".js-project-column"))e.classList.toggle("hide-sm",t!==e.getAttribute("data-id")),t===e.getAttribute("data-id")?e.setAttribute("data-active-column",""):e.removeAttribute("data-active-column");for(const e of document.querySelectorAll(".js-project-column-navigation-item"))e.classList.toggle("selected",t===e.getAttribute("data-column-id"))}function se(){const t=document.querySelector(".js-project-column-navigation-item.selected");if(!t)return;const e=i(t,".js-project-column-nav"),n=t.offsetLeft,o=t.offsetWidth,c=n+o,s=window.innerWidth;(c-e.scrollLeft>s||c<e.scrollLeft)&&(e.scrollLeft=n-s/2+o/2)}function re(){const t=e(document,".js-project-issue-body-wrapper"),n=e(document,".js-project-issue-body-container"),o=t.getBoundingClientRect().height,c=n.getBoundingClientRect().height>o;e(document,".js-project-issue-body-blur").classList.toggle("d-none",!c),e(document,".js-project-issue-body-details-target").classList.toggle("d-none",!c)}async function ie(t,n){const o=document.querySelector(".js-project-card-details-pane");if(!o)return!1;const s=c(t,"href"),r=e(o,".js-project-card-details"),l=t.closest(".js-project-pane"),u=null!=l;if(Wt(".js-project-card-details-pane",!0),e(o,".js-project-card-details-header").classList.toggle("d-none",!u),l&&function(t,n){const o=e(t,".js-project-card-details-back-template",HTMLTemplateElement).content.cloneNode(!0),s=c(n,"data-back-to-label"),r=c(n,"data-back-to-class");e(o,".js-project-card-details-back-to-title").textContent=s,e(o,".js-project-card-details-back-link").classList.add(r);const i=e(t,".js-project-card-details-back-container");i.innerHTML="",i.appendChild(o)}(o,l),s===r.getAttribute("data-issue-url"))return void(n&&ae());const d=function(t,n){const o=i(t,".js-project-issue-details-container"),s=e(document,".js-project-card-details-loader-template",HTMLTemplateElement).content.cloneNode(!0),r=e(o,".js-issue-octicon",SVGElement).classList.contains("open");e(s,".js-issue-title").textContent=t.textContent,e(s,".js-issue-number").textContent=e(o,".js-issue-number").textContent,e(s,".js-issue-state").textContent=r?"Close":"Reopen";const l=c(t,"data-content-label");for(const e of a(s,".js-issue-type"))e.textContent=l;for(const e of a(s,".js-project-card-details-external-link"))e.setAttribute("href",t.getAttribute("href")||"#"),e.setAttribute("data-ga-click",`Project board, go to ${l}, location:sidebar`);e(s,".js-hide-project-menu").classList.toggle("d-none",n);const u=e(s,".js-issue-repository");u.textContent=c(t,"data-content-repo-label"),u.setAttribute("href",t.getAttribute("data-content-repo-url")||"#");const d=e(s,".js-project-card-details-loader-octicon");return d.innerHTML="",d.appendChild(e(o,".js-issue-octicon",Element).cloneNode(!0)),s}(t,u);let m;r.innerHTML="",r.appendChild(d),r.setAttribute("data-issue-url",s);try{m=await _(document,`${s}/show_from_project`)}catch(p){return void function(t,n){e(t,".js-project-card-details-error").classList.remove("d-none"),e(t,".js-project-card-details-loader").classList.add("d-none"),e(t,".js-project-card-details-retry").addEventListener("click",(function(){t.removeAttribute("data-issue-url"),ie(n,!1)}),{once:!0})}(r,t)}if(r.getAttribute("data-issue-url")===s){const t=m.querySelector(".js-hide-project-menu");t&&t.classList.toggle("d-none",u),r.innerHTML="",r.appendChild(m),re(),n&&ae()}}function ae(){const t=document.querySelector(".js-project-card-details-pane");t&&e(t,".js-project-card-details-external-link").focus()}function le(t){if("d"!==t.key)return;const e=t.currentTarget.querySelectorAll(".js-project-card-issue-link");1===e.length&&(ie(e[0],!0),t.preventDefault())}function ue(){const t=e(document,".js-project-create-linked-repo-list"),n=e(t,".js-blankslate"),o=e(document,".js-project-create-linked-repo-search-input-group"),c=e(document,".js-project-create-linked-repo-max"),s=a(t,".js-project-repo-link-badge").length,r=s>=parseInt(c.getAttribute("data-max"),10);o.classList.toggle("d-none",r),c.classList.toggle("d-none",!r),n.classList.toggle("d-none",s>0)}s("click",".js-card-filter-clear",(function(){const t=e(document,".js-card-filter-input",HTMLInputElement);t.value="",n(t,"input")})),s("change",".js-column-purpose-value",(function(t){Qt(c(t.currentTarget,"data-preset-url"))})),r(".project-dialog .js-project-column-automation",(function(){Qt()})),r(".js-project-column-card",{constructor:HTMLElement,add(t){dt(t),Zt()},remove:Zt}),r(".js-card-filter-input",{constructor:HTMLInputElement,add(e){e.addEventListener("input",t(pt,500)),b(e,(function(){gt(e)}))}}),s("focusin",".js-card-filter-input",(function(t){t.currentTarget instanceof HTMLInputElement&&gt(t.currentTarget)})),s("focusout:delay",".js-card-filter-input",(function(){yt()})),s("click",".js-card-filter-suggestion",(function(){e(document,".js-card-filter-input",HTMLInputElement).focus()})),s("click",".js-card-filter",(function(t){const e=t.currentTarget.getAttribute("data-card-filter");e&&Lt(e)})),s("navigation:keydown",".js-card-filter-suggester",(function(t){switch(x(t.detail.originalEvent)){case"Escape":t.preventDefault(),yt();break;case"ArrowLeft":case"ArrowRight":case"Enter":yt()}})),s("navigation:open",".js-card-filter-suggester",(function(t){const o=document.querySelector(".js-card-filter-input");if(o instanceof HTMLInputElement){const s=e(document,".js-card-filter-suggester"),r=c(t.target,"data-value"),i=o.value.slice(0,o.selectionEnd).replace(/\S+$/,""),a=o.value.slice(o.selectionEnd);s.classList.contains("d-none")||(t.preventDefault(),o.value=i+r+a,n(o,"input"),gt(o)),yt()}})),r(".js-project-columns-container",{subscribe:t=>v(t,"socket:message",(async function(t){const e=t.detail.data;if(wt!==e.client_uid){const n=t.currentTarget;Pt(),Rt(),await y(),J(n,e)}else"column_automation_updated"===e.action&&null!=e.state&&function(t){for(const e of t.columns){const t=document.getElementById(`column-${e.id}`);t&&O(e,t)}}(e.state)}))}),document.addEventListener("socket:message",(function(t){const{data:n,name:o}=t.detail;if(n.locked&&function(){const t=document.querySelector(".js-project-lock-container");if(!t)return;const n=e(t,".Popover"),o=n.classList.contains("d-none");if(n.classList.toggle("d-none",!0),!o){const e=document.activeElement;if(t.contains(e)){const t=document.querySelector(".js-project-header");t&&t.focus()}}}(),n.is_project_activity){const t=document.querySelector(".js-project-activity-pane");null==t||t.classList.add("Details--on")}o.startsWith("projects:metadata:")&&(document.title=n.name)}),{capture:!0}),r(".js-project-columns-drag-container",{constructor:HTMLElement,add(t){L.create(t,{animation:150,draggable:".js-project-column",filter:".js-note-text, .js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:te(t),handle:ee(t),handleReplacedDragElement:!0,group:{name:"project-column",put:!1,pull:!1},onMove:_t,onUpdate:Bt})}}),r(".js-card-drag-container",{constructor:HTMLElement,add(t){L.create(t,{animation:150,draggable:".js-project-column-card",filter:".js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:te(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:ee(t),handleReplacedDragElement:!0,group:"project-card",onAdd:It,onUpdate:It})}}),r(".js-project-search-results-drag-container",{constructor:HTMLElement,add(t){L.create(t,{sort:!1,animation:150,draggable:".js-project-column-card",fallbackClass:te(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:ee(t),group:{name:"project-card",put:!1,pull:!0},onAdd:It,onUpdate:It})}}),r(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=c(t,"data-content-type"),n=c(t,"data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),r(".js-client-uid-field",{constructor:HTMLInputElement,add(t){t.value=wt}}),r(".js-project-column[data-active-column]",{remove(){document.querySelector(".js-project-column[data-active-column]")||ne()}}),s("click",".js-project-column-navigation-item",(function(t){t.preventDefault();const e=c(t.currentTarget,"data-column-id");ce(e),oe(e)})),s("click",".js-open-active-column-dialog",(function(t){const e=document.querySelector(".js-project-column[data-active-column]");if(e){const n=c(e,"data-id");At(`${c(t.currentTarget,"data-dialog-prefix")}-${n}`)}})),s("click",".js-toggle-project-edit-mode",(function(t){t.currentTarget.classList.toggle("selected"),document.body.classList.toggle("project-edit-mode")})),s("click",".js-move-card-to-column-button",(function(t){const e=t.currentTarget.getAttribute("data-card-id"),n=t.currentTarget.getAttribute("data-content-id"),o=t.currentTarget.getAttribute("data-content-type"),s=c(t.currentTarget,"data-column-id"),r=Ft(e,n,o),i=document.querySelector(`.js-project-column[data-id="${s}"] .js-project-column-cards`);if(r&&i){t.currentTarget.hasAttribute("data-change-active-column")&&(ce(s),oe(s),se());const e=r.closest(".js-project-column");i.prepend(r),qt(r,e)}})),s("click",".js-add-note-button",(function(t){t.preventDefault();const e=document.querySelector(".js-project-column[data-active-column] .js-add-note-container .js-details-target");e&&H(e)})),s("click",".js-project-lock-info-button, .js-close-project-lock-popover",(function(){const t=e(document,".js-project-lock-container .Popover"),n=t.classList.contains("d-none");t.classList.toggle("d-none",!n)})),B((function(t){t.matches(".js-project-card-details-pane .js-comment .js-comment-update")&&re()})),s("click",".js-hide-project-card-details",(function(){const t=e(document,".js-project-card-details");t.removeAttribute("data-issue-url"),t.innerHTML=""})),h(".js-project-column-card",(function(t){t.addEventListener("keydown",le),t.addEventListener("blur",(function(){t.removeEventListener("keydown",le)}),{once:!0})})),s("click",".js-project-card-issue-link",(function(t){(function(t){return!t.metaKey&&(!t.ctrlKey&&(!t.altKey&&(!t.shiftKey&&0===t.button)))})(t)&&(ie(t.currentTarget,!1),t.preventDefault())})),kt(".js-project-card-issue-details-title",(async function(t,n){const o=i(t,".js-details-container"),c=await n.json();H(o),null!=c.json.issue_title&&(e(o,".js-issue-title").textContent=c.json.issue_title);for(const e of t.elements)(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.defaultValue=e.value)})),s("auto-complete-change",".js-project-create-repo-link-auto-complete",(function(t){const n=t.target,o=n.querySelector(`.js-project-repo-link-badge[data-repo-name="${n.value}"]`);if(!o)return;const c=e(document,".js-project-create-linked-repo-list"),s=e(o,".js-repo-id",HTMLInputElement);let r=!1;for(const e of a(c,".js-repo-id",HTMLInputElement))if(e.value===s.value){r=!0;break}r||(s.disabled=!1,c.append(o),o.classList.remove("d-none")),n.value="",ue()})),s("click",".js-remove-project-repo-link",(function(t){i(t.target,".js-project-repo-link-badge").remove(),ue()})),C("keydown",".js-project-create-linked-repo-search",(function(t){"Enter"===t.key&&t.preventDefault()})),s("click",".js-project-dialog-button",(function({currentTarget:t}){At(c(t,"data-dialog-id"),t)})),s("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){i(t,".js-project-column-card").focus()})),s("click",".js-project-active-column-dialog-button",(async function({currentTarget:t}){const n=c(t,"data-dialog-id");!function(t,n){const o=e(t,".js-move-card-to-column-dialog-body"),s=i(n,".js-project-column-card"),r=s.closest(".js-project-column"),a=r&&r.getAttribute("data-id"),l=e(document,"#move-card-to-column-button-template",HTMLTemplateElement),u=e(t,".js-move-card-to-column-title");u.textContent=s.closest(".js-project-archived-cards-pane")?c(u,"data-restore-title"):c(u,"data-move-title"),o.innerHTML="";for(const i of document.querySelectorAll(".js-project-column-navigation-item")){const t=c(i,"data-column-id"),r=e(l.content.cloneNode(!0),".js-move-card-to-column-button",HTMLButtonElement);r.setAttribute("data-card-id",c(s,"data-card-id")),r.setAttribute("data-content-id",c(s,"data-content-id")),r.setAttribute("data-content-type",c(s,"data-content-type")),r.setAttribute("data-column-id",t),n.hasAttribute("data-change-active-column")&&r.setAttribute("data-change-active-column",""),r.textContent=c(i,"data-column-name"),r.disabled=null!=a&&t===a,o.appendChild(r)}}(await At(n,t),t)})),s("details-menu-select",".js-project-change-state-sync-menu",(function(t){const n=i(t.detail.relatedTarget,".js-project-change-state-sync-menu-parent"),o=e(t.detail.relatedTarget,"[data-menu-button-text]").textContent.trim();e(n,".js-project-change-state-sync-menu-button").textContent=o}),{capture:!0}),s("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){const e=!1===i(t,".Details-element").hasAttribute("open"),n=e?"data-linked-pr-hmac-expanded":"data-linked-pr-hmac-collapsed",o=t.getAttribute(n)||"",c=e?"data-linked-pr-expanded":"data-linked-pr-collapsed",s=t.getAttribute(c)||"";$({hydroEventPayload:s,hydroEventHmac:o,hydroClientContext:""},!0)})),function(t,e){let n,o;function c(e){if(n)return;const o=e.currentTarget;switch(Tt(e.key)){case"confirm":case"Space":if(o.classList.contains("js-redacted-project-column-card"))return;if(!o.classList.contains("js-keyboard-movable"))return;n=new CardMove(o,t,(function(){n=null})),e.preventDefault();break;case"up":{const t=o.previousElementSibling;if(t&&t.classList.contains("js-project-column-card"))t.focus(),e.preventDefault();else{const t=o.closest(".js-project-column");t instanceof HTMLElement&&(t.focus(),e.preventDefault())}break}case"down":{const t=o.nextElementSibling;t&&t.classList.contains("js-project-column-card")&&(t.focus(),e.preventDefault());break}}}function s(t){if(o)return;if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;const n=t.currentTarget;switch(Tt(t.key)){case"confirm":case"Space":if(!n.classList.contains("js-keyboard-movable"))return;o=new ColumnMove(n,e,(function(){o=null})),t.preventDefault();break;case"down":{const e=n.querySelector(".js-project-column-card");e&&(e.focus(),t.preventDefault());break}case"left":{const e=n.previousElementSibling;e&&e.classList.contains("js-project-column")&&(e.focus(),t.preventDefault());break}case"right":{const e=n.nextElementSibling;e&&e.classList.contains("js-project-column")&&(e.focus(),t.preventDefault());break}}}h(".js-project-column-card",(function(t){if(n){if(n.isMoving(t))return;n.cancel()}t.addEventListener("keydown",c),t.addEventListener("blur",(function e(){n&&n.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",c))}))})),h(".js-project-column",(function(t){if(o){if(o.isMoving(t))return;o.cancel()}t.addEventListener("keydown",s),t.addEventListener("blur",(function e(){o&&o.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",s))}))}))}(qt,Dt),ne()}}}));
//# sourceMappingURL=projects-264323be.js.map
